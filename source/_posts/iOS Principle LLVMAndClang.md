---
title: iOS Principleï¼šLLVMAndClang
layout: post
date: 2018-05-29 21:56:27
comments: true
categories:
	- Principle
keywords: Principle
tags:
	- iOS
description: 

---
LLVM æ˜¯ Low Level Virtual Machine çš„ç®€ç§°ï¼Œè¿™ä¸ªåº“æä¾›äº†ä¸ç¼–è¯‘å™¨ç›¸å…³çš„æ”¯æŒï¼Œèƒ½å¤Ÿè¿›è¡Œç¨‹åºè¯­è¨€çš„ç¼–è¯‘æœŸä¼˜åŒ–ã€é“¾æ¥ä¼˜åŒ–ã€åœ¨çº¿ç¼–è¯‘ä¼˜åŒ–ã€ä»£ç ç”Ÿæˆã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¯ä»¥ä½œä¸ºå¤šç§è¯­è¨€ç¼–è¯‘å™¨çš„åå°æ¥ä½¿ç”¨~                                                                                                 

<!-- more -->
------
ğŸ‘¨ğŸ»â€ğŸ’» [Github Demo](https://github.com/ReverseScale/iOSPrinciple_LLVMAndClang)

### æ–¹ä¾¿è®°å¿†
* ç¼–è¯‘è¯­è¨€ï¼šOC å’Œ Swift åŸºäº Clang å’Œ LLVM æ¥ç¼–è¯‘ï¼ˆClang å‰ç«¯ã€LLVM åç«¯ï¼‰
* ç‰¹ç‚¹ï¼šClang æ›´å¿«ã€å†…å­˜å ç”¨å°ã€å…¼å®¹GCCã€è®¾è®¡ç®€å•ã€æ¨¡å—åŒ–åº“ï¼ˆGCC æ”¯æŒJAVAç­‰å’Œæ›´å¤šå¹³å°ï¼‰
* ç¼–è¯‘å·¥ä½œï¼šClang è¯­æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æï¼Œç”Ÿæˆä¸­é—´ä»£ç ï¼›LLVM æœºå™¨æ— å…³çš„ä»£ç ä¼˜åŒ–ï¼Œç”Ÿæˆæœºå™¨è¯­è¨€
* ç¼–è¯‘å®Œæˆï¼šç”Ÿæˆ dSYM æ–‡ä»¶å­˜æ”¾å‡½æ•°åœ°å€æ˜ å°„ï¼ŒFabricã€å‹ç›Ÿç­‰å´©æºƒè§£æ
* ç¼–è¯‘æ’å…¥ï¼šé¢„å¤„ç†â€”â€”å®ã€æ’å…¥è„šæœ¬â€”â€”cocoapod
* ç¼–è¯‘æ—¶é—´ä¼˜åŒ–ï¼š
    * ä»£ç å±‚â€”ä¼˜åŒ–@classä»£æ›¿#importã€æ‰“åŒ…åº“ã€å¤´æ–‡ä»¶è¿›è¡Œé¢„ç¼–è¯‘ï¼›
    * ç¼–è¯‘å™¨å±‚â€”debugæ¨¡å¼ä¸ç”Ÿæˆdsymå’Œå¼€å¯Build Active Architectureå¹¶ä¸”å…³é—­ç¼–è¯‘å™¨ä¼˜åŒ–Only

> æ•´ç†å­¦ä¹  iOS Principle ä¸€ç³»åˆ—çš„æ–‡ç« ï¼Œæ¯ç¯‡å¼€å¤´å½’ç»“çŸ¥è¯†ç‚¹ï¼Œå¸®åŠ©è®°å¿†

---
### ç›¸å…³æ¦‚å¿µ

#### å†å²åŸå› 

2000å¹´ï¼Œä¼Šåˆ©è¯ºä¼Šå¤§å­¦å„å·´çº³ï¼é¦™æ§Ÿåˆ†æ ¡ï¼ˆUniversity of Illinois at Urbana-Champaign ç®€ç§°UIUCï¼‰è¿™æ‰€äº«æœ‰ä¸–ç•Œå£°æœ›çš„ä¸€æµå…¬ç«‹ç ”ç©¶å‹å¤§å­¦çš„ Chris Lattnerï¼ˆä»–çš„ twitter @clattner_llvm ï¼‰ å¼€å‘äº†ä¸€ä¸ªå«ä½œ Low Level Virtual Machine çš„ç¼–è¯‘å™¨å¼€å‘å·¥å…·å¥—ä»¶ï¼Œåæ¥æ¶‰åŠèŒƒå›´è¶Šæ¥è¶Šå¤§ï¼Œå¯ä»¥ç”¨äºå¸¸è§„ç¼–è¯‘å™¨ï¼ŒJITç¼–è¯‘å™¨ï¼Œæ±‡ç¼–å™¨ï¼Œè°ƒè¯•å™¨ï¼Œé™æ€åˆ†æå·¥å…·ç­‰ä¸€ç³»åˆ—è·Ÿç¼–ç¨‹è¯­è¨€ç›¸å…³çš„å·¥ä½œï¼Œäºæ˜¯å°±æŠŠç®€ç§° LLVM è¿™ä¸ªç®€ç§°ä½œä¸ºäº†æ­£å¼çš„åå­—ã€‚Chris Lattner åæ¥åˆå¼€å‘äº† Clangï¼Œä½¿å¾— LLVM ç›´æ¥æŒ‘æˆ˜ GCC çš„åœ°ä½ã€‚2012å¹´ï¼ŒLLVM è·å¾—ç¾å›½è®¡ç®—æœºå­¦ä¼š ACM çš„è½¯ä»¶ç³»ç»Ÿå¤§å¥–ï¼Œå’Œ UNIXï¼ŒWWWï¼ŒTCP/IPï¼ŒTexï¼ŒJAVA ç­‰é½åã€‚

Chris Lattner ç”Ÿäº 1978 å¹´ï¼Œ2005å¹´åŠ å…¥è‹¹æœï¼Œå°†è‹¹æœä½¿ç”¨çš„ GCC å…¨é¢è½¬ä¸º LLVMã€‚2010å¹´å¼€å§‹ä¸»å¯¼å¼€å‘ Swift è¯­è¨€ã€‚

![](https://user-gold-cdn.xitu.io/2018/5/29/163ab14714064c56?w=262&h=133&f=jpeg&s=7096)

iOS å¼€å‘ä¸­ Objective-C æ˜¯ Clang / LLVM æ¥ç¼–è¯‘çš„ã€‚

Swift æ˜¯ Swift / LLVMï¼Œå…¶ä¸­ Swift å‰ç«¯ä¼šå¤šå‡º SIL optimizerï¼Œå®ƒä¼šæŠŠ .swift ç”Ÿæˆä¸ºä¸­é—´ä»£ç  .sil å±äº High-Level IRï¼Œ å› ä¸º Swift åœ¨ç¼–è¯‘æ—¶å°±å®Œæˆäº†æ–¹æ³•ç»‘å®šï¼Œç›´æ¥é€šè¿‡åœ°å€è°ƒç”¨å±äºå¼ºç±»å‹è¯­è¨€ï¼Œæ–¹æ³•è°ƒç”¨ä¸å†æ˜¯åƒOCé‚£æ ·çš„æ¶ˆæ¯å‘é€ï¼Œè¿™æ ·ç¼–è¯‘å°±å¯ä»¥è·å¾—æ›´å¤šçš„ä¿¡æ¯ç”¨åœ¨åé¢çš„åç«¯ä¼˜åŒ–ä¸Šã€‚

LLVMæ˜¯ä¸€ä¸ªæ¨¡å—åŒ–å’Œå¯é‡ç”¨çš„ç¼–è¯‘å™¨å’Œå·¥å…·é“¾æŠ€æœ¯çš„é›†åˆï¼ŒClang æ˜¯ LLVM çš„å­é¡¹ç›®ï¼Œæ˜¯ Cï¼ŒC++ å’Œ Objective-C ç¼–è¯‘å™¨ï¼Œç›®çš„æ˜¯æä¾›æƒŠäººçš„å¿«é€Ÿç¼–è¯‘ï¼Œæ¯” GCC å¿«3å€ï¼Œå…¶ä¸­çš„ clang static analyzer ä¸»è¦æ˜¯è¿›è¡Œè¯­æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æå’Œç”Ÿæˆä¸­é—´ä»£ç ï¼Œå½“ç„¶è¿™ä¸ªè¿‡ç¨‹ä¼šå¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå‡ºé”™çš„å’Œéœ€è¦è­¦å‘Šçš„ä¼šæ ‡æ³¨å‡ºæ¥ã€‚LLVM æ ¸å¿ƒåº“æä¾›ä¸€ä¸ªä¼˜åŒ–å™¨ï¼Œå¯¹æµè¡Œçš„ CPU åšä»£ç ç”Ÿæˆæ”¯æŒã€‚lld æ˜¯ Clang / LLVM çš„å†…ç½®é“¾æ¥å™¨ï¼Œclang å¿…é¡»è°ƒç”¨é“¾æ¥å™¨æ¥äº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ã€‚

è¿™é‡Œæ˜¯ Clang å®˜æ–¹è¯¦ç»†æ–‡æ¡£ï¼š [Welcome to Clangâ€™s documentation! â€” Clang 4.0 documentation ](http://clang.llvm.org/docs/)

è¿™ç¯‡æ˜¯å¯¹ LLVM æ¶æ„çš„ä¸€ä¸ªæ¦‚è¿°ï¼š [The Architecture of Open Source Applications](http://www.aosabook.org/en/llvm.html)

å°†ç¼–è¯‘å™¨ä¹‹å‰å¯¹äºç¼–è¯‘çš„å‰ä¸–ä»Šç”Ÿä¹Ÿæ˜¯éœ€è¦äº†è§£çš„ï¼Œæ¯”å¦‚å›ç­”ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œç¼–è¯‘å™¨ç¨‹åºæ˜¯ç”¨ä»€ä¹ˆç¼–è¯‘çš„ï¼Ÿçœ‹çœ‹ [ã€Šlinkers and loadersã€‹](https://book.douban.com/subject/1436811/)è¿™æœ¬ä¹¦å°±çŸ¥é“äº†ã€‚

---

#### LLVM ä¸ Clang ä»‹ç»

LLVM æ˜¯ Low Level Virtual Machine çš„ç®€ç§°ï¼Œè¿™ä¸ªåº“æä¾›äº†ä¸ç¼–è¯‘å™¨ç›¸å…³çš„æ”¯æŒï¼Œèƒ½å¤Ÿè¿›è¡Œç¨‹åºè¯­è¨€çš„ç¼–è¯‘æœŸä¼˜åŒ–ã€é“¾æ¥ä¼˜åŒ–ã€åœ¨çº¿ç¼–è¯‘ä¼˜åŒ–ã€ä»£ç ç”Ÿæˆã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¯ä»¥ä½œä¸ºå¤šç§è¯­è¨€ç¼–è¯‘å™¨çš„åå°æ¥ä½¿ç”¨ã€‚å¦‚æœè¿™æ ·è¿˜æ¯”è¾ƒæŠ½è±¡çš„è¯ï¼Œä»‹ç»ä¸‹ Clang å°±çŸ¥é“äº†ï¼šClang æ˜¯ä¸€ä¸ª C++ ç¼–å†™ã€åŸºäº LLVMã€å‘å¸ƒäº LLVM BSD è®¸å¯è¯ä¸‹çš„ C/C++/Objective C/Objective C++ ç¼–è¯‘å™¨ï¼Œå…¶ç›®æ ‡ï¼ˆä¹‹ä¸€ï¼‰å°±æ˜¯è¶…è¶Š GCCã€‚

Clang å¼€å‘äº‹å‡ºæœ‰å› ï¼ŒWiki ä»‹ç»å¦‚ä¸‹ï¼š
> Apple ä½¿ç”¨ LLVM åœ¨ä¸æ”¯æŒå…¨éƒ¨ OpenGL ç‰¹æ€§çš„ GPU (Intel ä½ç«¯æ˜¾å¡) ä¸Šç”Ÿæˆä»£ç  (JIT)ï¼Œä»¤ç¨‹åºä»ç„¶èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚ä¹‹å LLVM ä¸ GCC çš„é›†æˆè¿‡ç¨‹å¼•å‘äº†ä¸€äº›ä¸å¿«ï¼ŒGCC ç³»ç»Ÿåºå¤§è€Œç¬¨é‡ï¼Œè€Œ Apple å¤§é‡ä½¿ç”¨çš„ Objective-C åœ¨ GCC ä¸­ä¼˜å…ˆçº§å¾ˆä½ã€‚æ­¤å¤– GCC ä½œä¸ºä¸€ä¸ªçº¯ç²¹çš„ç¼–è¯‘ç³»ç»Ÿï¼Œä¸ IDE é…åˆå¾ˆå·®ã€‚åŠ ä¹‹è®¸å¯è¯æ–¹é¢çš„è¦æ±‚ï¼ŒApple æ— æ³•ä½¿ç”¨ä¿®æ”¹ç‰ˆçš„ GCC è€Œé—­æºã€‚äºæ˜¯ Apple å†³å®šä»é›¶å¼€å§‹å†™ C family çš„å‰ç«¯ï¼Œä¹Ÿå°±æ˜¯åŸºäº LLVM çš„ Clang äº†ã€‚

Clang çš„ç‰¹æ€§ï¼š

- å¿«ï¼šé€šè¿‡ç¼–è¯‘ OS X ä¸Šå‡ ä¹åŒ…å«äº†æ‰€æœ‰ C å¤´æ–‡ä»¶çš„ carbon.h çš„æµ‹è¯•ï¼ŒåŒ…æ‹¬é¢„å¤„ç† (Preprocess)ï¼Œè¯­æ³• (lex)ï¼Œè§£æ (parse)ï¼Œè¯­ä¹‰åˆ†æ (Semantic Analysis)ï¼ŒæŠ½è±¡è¯­æ³•æ ‘ç”Ÿæˆ (Abstract Syntax Tree) çš„æ—¶é—´ï¼ŒClang æ˜¯ Apple GCC 4.0 çš„ 2.5x å¿«ã€‚(2007-7-25)
- å†…å­˜å ç”¨å°ï¼šClang å†…å­˜å ç”¨æ˜¯æºç çš„ 130%ï¼ŒApple GCC åˆ™è¶…è¿‡ 10xã€‚
- è¯Šæ–­ä¿¡æ¯å¯è¯»æ€§å¼ºï¼šæˆ‘ä¸ä¼šæ’ç‰ˆï¼Œæ¨èå»ç½‘ç«™è§‚çœ‹ã€‚å…¶ä¸­é”™è¯¯çš„è¯­æ³•ä¸ä½†æœ‰æºç æç¤ºï¼Œè¿˜ä¼šåœ¨é”™è¯¯çš„è°ƒç”¨å’Œç›¸å…³ä¸Šä¸‹æ–‡çš„ä¸‹æ–¹æœ‰~~~~~å’Œ^çš„æç¤ºï¼Œç›¸æ¯”ä¹‹ä¸‹ GCC çš„æç¤ºå¾ˆå¤©ä¹¦ã€‚
- GCC å…¼å®¹æ€§ã€‚
- è®¾è®¡æ¸…æ™°ç®€å•ï¼Œå®¹æ˜“ç†è§£ï¼Œæ˜“äºæ‰©å±•å¢å¼ºã€‚ä¸ä»£ç åŸºç¡€å¤è€çš„ GCC ç›¸æ¯”ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“ã€‚
- åŸºäºåº“çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äº IDE é›†æˆåŠå…¶ä»–ç”¨é€”çš„é‡ç”¨ã€‚ç”±äºå†å²åŸå› ï¼ŒGCC æ˜¯ä¸€ä¸ªå•ä¸€çš„å¯æ‰§è¡Œç¨‹åºç¼–è¯‘å™¨ï¼Œå…¶å†…éƒ¨å®Œæˆäº†ä»é¢„å¤„ç†åˆ°æœ€åä»£ç ç”Ÿæˆçš„å…¨éƒ¨è¿‡ç¨‹ï¼Œä¸­é—´è¯¸å¤šä¿¡æ¯éƒ½æ— æ³•è¢«å…¶ä»–ç¨‹åºé‡ç”¨ã€‚Clang å°†ç¼–è¯‘è¿‡ç¨‹åˆ†æˆå½¼æ­¤åˆ†ç¦»çš„å‡ ä¸ªé˜¶æ®µï¼ŒAST ä¿¡æ¯å¯åºåˆ—åŒ–ã€‚é€šè¿‡åº“çš„æ”¯æŒï¼Œç¨‹åºèƒ½å¤Ÿè·å–åˆ° AST çº§åˆ«çš„ä¿¡æ¯ï¼Œå°†å¤§å¤§å¢å¼ºå¯¹äºä»£ç çš„æ“æ§èƒ½åŠ›ã€‚å¯¹äº IDE è€Œè¨€ï¼Œä»£ç è¡¥å…¨ã€é‡æ„æ˜¯é‡è¦çš„åŠŸèƒ½ï¼Œç„¶è€Œå¦‚æœæ²¡æœ‰åº•å±‚çš„æ”¯æŒï¼Œåªä½¿ç”¨ tags åˆ†ææˆ–æ˜¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ˜¯å¾ˆéš¾è¾¾æˆçš„ã€‚

å½“ç„¶ï¼ŒGCC ä¹Ÿæœ‰å…¶ä¼˜åŠ¿ï¼š

- æ”¯æŒ JAVA/ADA/FORTRAN
- å½“å‰çš„ Clang çš„ C++ æ”¯æŒè½åäº GCCï¼Œå‚è§ã€‚ï¼ˆè¿‘æ—¥ Clang å·²ç»å¯ä»¥è‡ªç¼–è¯‘ï¼Œè§ï¼‰
- GCC æ”¯æŒæ›´å¤šå¹³å°
- GCC æ›´æµè¡Œï¼Œå¹¿æ³›ä½¿ç”¨ï¼Œæ”¯æŒå®Œå¤‡
- GCC åŸºäº Cï¼Œä¸éœ€è¦ C++ ç¼–è¯‘å™¨å³å¯ç¼–è¯‘

---

### iOS å¼€å‘ä¸­ç”¨é€”

> ä¸€èˆ¬å¯ä»¥å°†ç¼–ç¨‹è¯­è¨€åˆ†ä¸ºä¸¤ç§ï¼Œç¼–è¯‘è¯­è¨€å’Œç›´è¯‘å¼è¯­è¨€ã€‚

* ç¼–è¯‘è¯­è¨€:åƒC++,Objective Céƒ½æ˜¯ç¼–è¯‘è¯­è¨€ã€‚ç¼–è¯‘è¯­è¨€åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¿…é¡»å…ˆé€šè¿‡ç¼–è¯‘å™¨ç”Ÿæˆæœºå™¨ç ï¼Œæœºå™¨ç å¯ä»¥ç›´æ¥åœ¨CPUä¸Šæ‰§è¡Œï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡è¾ƒé«˜ã€‚
* ç›´è¯‘å¼è¯­è¨€:åƒJavaScript,Pythonéƒ½æ˜¯ç›´è¯‘å¼è¯­è¨€ã€‚ç›´è¯‘å¼è¯­è¨€ä¸éœ€è¦ç»è¿‡ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œè€Œæ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™é€šè¿‡ä¸€ä¸ªä¸­é—´çš„è§£é‡Šå™¨å°†ä»£ç è§£é‡Šä¸ºCPUå¯ä»¥æ‰§è¡Œçš„ä»£ç ã€‚æ‰€ä»¥ï¼Œè¾ƒç¼–è¯‘è¯­è¨€æ¥è¯´ï¼Œç›´è¯‘å¼è¯­è¨€æ•ˆç‡ä½ä¸€äº›ï¼Œä½†æ˜¯ç¼–å†™çš„æ›´çµæ´»ï¼Œä¹Ÿå°±æ˜¯ä¸ºå•¥JSå¤§æ³•å¥½ã€‚

iOSå¼€å‘ç›®å‰çš„å¸¸ç”¨è¯­è¨€æ˜¯ï¼šObjectiveå’ŒSwiftã€‚äºŒè€…éƒ½æ˜¯ç¼–è¯‘è¯­è¨€ï¼Œæ¢å¥è¯è¯´éƒ½æ˜¯éœ€è¦ç¼–è¯‘æ‰èƒ½æ‰§è¡Œçš„ã€‚äºŒè€…çš„ç¼–è¯‘éƒ½æ˜¯ä¾èµ–äºClang + LLVM.

---

#### iOSç¼–è¯‘

ä¸ç®¡æ˜¯OCè¿˜æ˜¯Swiftï¼Œéƒ½æ˜¯é‡‡ç”¨Clangä½œä¸ºç¼–è¯‘å™¨å‰ç«¯ï¼ŒLLVM(Low level vritual machine)ä½œä¸ºç¼–è¯‘å™¨åç«¯ã€‚æ‰€ä»¥ç®€å•çš„ç¼–è¯‘è¿‡ç¨‹å¦‚å›¾

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa75352abcc?w=640&h=169&f=png&s=8837)

---

#### ç¼–è¯‘å™¨å‰ç«¯

ç¼–è¯‘å™¨å‰ç«¯çš„ä»»åŠ¡æ˜¯è¿›è¡Œï¼šè¯­æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æï¼Œç”Ÿæˆä¸­é—´ä»£ç (intermediate representation )ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå¦‚æœå‘ç°é”™è¯¯æˆ–è€…è­¦å‘Šä¼šæ ‡æ³¨å‡ºæ¥åœ¨å“ªä¸€è¡Œã€‚

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa6eb105817?w=640&h=540&f=jpeg&s=21665)

---

#### ç¼–è¯‘å™¨åç«¯

ç¼–è¯‘å™¨åç«¯ä¼šè¿›è¡Œæœºå™¨æ— å…³çš„ä»£ç ä¼˜åŒ–ï¼Œç”Ÿæˆæœºå™¨è¯­è¨€ï¼Œå¹¶ä¸”è¿›è¡Œæœºå™¨ç›¸å…³çš„ä»£ç ä¼˜åŒ–ã€‚iOSçš„ç¼–è¯‘è¿‡ç¨‹ï¼Œåç«¯çš„å¤„ç†å¦‚ä¸‹

- LVVMä¼˜åŒ–å™¨ä¼šè¿›è¡ŒBitCodeçš„ç”Ÿæˆï¼Œé“¾æ¥æœŸä¼˜åŒ–ç­‰ç­‰ã€‚

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa7700e2b00?w=640&h=379&f=jpeg&s=12687)

- LLVMæœºå™¨ç ç”Ÿæˆå™¨ä¼šé’ˆå¯¹ä¸åŒçš„æ¶æ„ï¼Œæ¯”å¦‚arm64ç­‰ç”Ÿæˆä¸åŒçš„æœºå™¨ç ã€‚

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa7782cac78?w=640&h=498&f=jpeg&s=16835)

---

#### æ‰§è¡Œä¸€æ¬¡ XCode build çš„æµç¨‹

å½“ä½ åœ¨XCodeä¸­ï¼Œé€‰æ‹©buildçš„æ—¶å€™(å¿«æ·é”®command+B)ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹è¿‡ç¨‹

- ç¼–è¯‘ä¿¡æ¯å†™å…¥è¾…åŠ©æ–‡ä»¶ï¼Œåˆ›å»ºç¼–è¯‘åçš„æ–‡ä»¶æ¶æ„(name.app)
- å¤„ç†æ–‡ä»¶æ‰“åŒ…ä¿¡æ¯ï¼Œä¾‹å¦‚åœ¨debugç¯å¢ƒä¸‹

```
Entitlements:
{
   "application-identifier" = "appçš„bundleid";
   "aps-environment" = development;
}
```

- æ‰§è¡ŒCocoaPodç¼–è¯‘å‰è„šæœ¬(ä¾‹å¦‚å¯¹äºä½¿ç”¨CocoaPodçš„å·¥ç¨‹ä¼šæ‰§è¡ŒCheckPods Manifest.lock)
- ç¼–è¯‘å„ä¸ª.mæ–‡ä»¶ï¼Œä½¿ç”¨CompileCå’Œclangå‘½ä»¤ã€‚

```
CompileC ClassName.o ClassName.m normal x86_64 objective-c com.apple.compilers.llvm.clang.1_0.compiler
export LANG=en_US.US-ASCII
export PATH="..."
clang -x objective-c -arch x86_64 -fmessage-length=0 -fobjc-arc... -Wno-missing-field-initializers ... -DDEBUG=1 ... -isysroot iPhoneSimulator10.1.sdk -fasm-blocks ... -I ä¸Šæ–‡æåˆ°çš„æ–‡ä»¶ -F æ‰€éœ€è¦çš„Framework  -iquote æ‰€éœ€è¦çš„Framework  ... -c ClassName.c -o ClassName.o
```

é€šè¿‡è¿™ä¸ªç¼–è¯‘çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°

- clangæ˜¯å®é™…çš„ç¼–è¯‘å‘½ä»¤
- x objective-c æŒ‡å®šäº†ç¼–è¯‘çš„è¯­è¨€
- arch x86_64åˆ¶å®šäº†ç¼–è¯‘çš„æ¶æ„ï¼Œç±»ä¼¼è¿˜æœ‰arm7ç­‰
- fobjc-arc ä¸€äº›åˆ—-få¼€å¤´çš„ï¼ŒæŒ‡å®šäº†é‡‡ç”¨arcç­‰ä¿¡æ¯ã€‚è¿™ä¸ªä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä½ å¯ä»¥å¯¹å•ç‹¬çš„ä¸€ä¸ª.mæ–‡ä»¶é‡‡ç”¨éARCç¼–ç¨‹ã€‚
- Wno-missing-field-initializers ä¸€ç³»åˆ—ä»¥-Wå¼€å¤´çš„ï¼ŒæŒ‡çš„æ˜¯ç¼–è¯‘çš„è­¦å‘Šé€‰é¡¹ï¼Œé€šè¿‡è¿™äº›ä½ å¯ä»¥å®šåˆ¶åŒ–ç¼–è¯‘é€‰é¡¹
- DDEBUG=1 ä¸€äº›åˆ—-Då¼€å¤´çš„ï¼ŒæŒ‡çš„æ˜¯é¢„ç¼–è¯‘å®ï¼Œé€šè¿‡è¿™äº›å®å¯ä»¥å®ç°æ¡ä»¶ç¼–è¯‘
- iPhoneSimulator10.1.sdk åˆ¶å®šäº†ç¼–è¯‘é‡‡ç”¨çš„iOS SDKç‰ˆæœ¬
- I æŠŠç¼–è¯‘ä¿¡æ¯å†™å…¥æŒ‡å®šçš„è¾…åŠ©æ–‡ä»¶
- F é“¾æ¥æ‰€éœ€è¦çš„Framework
- c ClassName.c ç¼–è¯‘æ–‡ä»¶
- o ClassName.o ç¼–è¯‘äº§ç‰©

---

#### å·¥ä½œæµç¨‹
- é“¾æ¥éœ€è¦çš„Frameworkï¼Œä¾‹å¦‚Foundation.framework,AFNetworking.framework,ALiPay.fframework
- ç¼–è¯‘xibæ–‡ä»¶
- æ‹·è´xibï¼Œå›¾ç‰‡ç­‰èµ„æºæ–‡ä»¶åˆ°ç»“æœç›®å½•
- ç¼–è¯‘ImageAssets
- å¤„ç†info.plist
- æ‰§è¡ŒCocoaPodè„šæœ¬
- æ‹·è´Swiftæ ‡å‡†åº“
- åˆ›å»º.appæ–‡ä»¶å’Œå¯¹å…¶ç­¾å

---

#### dSYM æ–‡ä»¶

æˆ‘ä»¬åœ¨æ¯æ¬¡ç¼–è¯‘è¿‡åï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªdsymæ–‡ä»¶ã€‚dsymæ–‡ä»¶ä¸­ï¼Œå­˜å‚¨äº†16è¿›åˆ¶çš„å‡½æ•°åœ°å€æ˜ å°„ã€‚

åœ¨Appå®é™…æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œæ˜¯é€šè¿‡åœ°å€æ¥è°ƒç”¨æ–¹æ³•çš„ã€‚åœ¨App crashçš„æ—¶å€™ï¼Œç¬¬ä¸‰æ–¹å·¥å…·(Fabric,å‹ç›Ÿç­‰)ä¼šå¸®æˆ‘ä»¬æŠ“åˆ°å´©æºƒçš„è°ƒç”¨æ ˆï¼Œè°ƒç”¨æ ˆé‡Œä¼šåŒ…å«crashåœ°å€çš„è°ƒç”¨ä¿¡æ¯ã€‚ç„¶åï¼Œé€šè¿‡dSYMæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”±åœ°å€æ˜ å°„åˆ°å…·ä½“çš„å‡½æ•°ä½ç½®ã€‚

XCodeä¸­ï¼Œé€‰æ‹©Window -> Organizerå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç”Ÿæˆçš„archieræ–‡ä»¶

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa75a3a49f3?w=640&h=264&f=jpeg&s=12910)

> iOS å¦‚ä½•è°ƒè¯•ç¬¬ä¸‰æ–¹ç»Ÿè®¡åˆ°çš„å´©æºƒæŠ¥å‘Š (http://blog.csdn.net/hello_hwc/article/details/50036323)

---

#### __attribute__

æˆ–å¤šæˆ–å°‘ï¼Œä½ éƒ½ä¼šåœ¨ç¬¬ä¸‰æ–¹åº“æˆ–è€…iOSçš„å¤´æ–‡ä»¶ä¸­ï¼Œè§åˆ°è¿‡attributeã€‚

æ¯”å¦‚

```
 __attribute__ ((warn_unused_result)) //å¦‚æœæ²¡æœ‰ä½¿ç”¨è¿”å›å€¼ï¼Œç¼–è¯‘çš„æ—¶å€™ç»™å‡ºè­¦å‘Š
```

__attribtue__ æ˜¯ä¸€ä¸ªé«˜çº§çš„çš„ç¼–è¯‘å™¨æŒ‡ä»¤ï¼Œå®ƒå…è®¸å¼€å‘è€…æŒ‡å®šæ›´æ›´å¤šçš„ç¼–è¯‘æ£€æŸ¥å’Œä¸€äº›é«˜çº§çš„ç¼–è¯‘æœŸä¼˜åŒ–ã€‚

åˆ†ä¸ºä¸‰ç§ï¼š

- å‡½æ•°å±æ€§ (Function Attribute)
- ç±»å‹å±æ€§ (Variable Attribute )
- å˜é‡å±æ€§ (Type Attribute )

è¯­æ³•ç»“æ„

__attribute__ è¯­æ³•æ ¼å¼ä¸ºï¼š__attribute__ ((attribute-list))

æ”¾åœ¨å£°æ˜åˆ†å·â€œ;â€å‰é¢ã€‚

æ¯”å¦‚ï¼Œåœ¨ä¸‰æ–¹åº“ä¸­æœ€å¸¸è§çš„ï¼Œå£°æ˜ä¸€ä¸ªå±æ€§æˆ–è€…æ–¹æ³•åœ¨å½“å‰ç‰ˆæœ¬å¼ƒç”¨äº†

```
@property (strong,nonatomic)CLASSNAME * property __deprecated;
```

è¿™æ ·çš„å¥½å¤„æ˜¯ï¼šç»™å¼€å‘è€…ä¸€ä¸ªè¿‡æ¸¡çš„ç‰ˆæœ¬ï¼Œè®©å¼€å‘è€…çŸ¥é“è¿™ä¸ªå±æ€§è¢«å¼ƒç”¨äº†ï¼Œåº”å½“ä½¿ç”¨æœ€æ–°çš„APIï¼Œä½†æ˜¯è¢«__deprecatedçš„å±æ€§ä»ç„¶å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚å¦‚æœç›´æ¥å¼ƒç”¨ï¼Œä¼šå¯¼è‡´å¼€å‘è€…åœ¨æ›´æ–°Podçš„æ—¶å€™ï¼Œä»£ç æ— æ³•è¿è¡Œäº†ã€‚

__attribtue__çš„ä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œæœ¬æ–‡åªåˆ—ä¸¾iOSå¼€å‘ä¸­å¸¸ç”¨çš„å‡ ä¸ªï¼š

```
//å¼ƒç”¨APIï¼Œç”¨ä½œAPIæ›´æ–°
#define __deprecated    __attribute__((deprecated))

//å¸¦æè¿°ä¿¡æ¯çš„å¼ƒç”¨
#define __deprecated_msg(_msg) __attribute__((deprecated(_msg)))

//é‡åˆ°__unavailableçš„å˜é‡/æ–¹æ³•ï¼Œç¼–è¯‘å™¨ç›´æ¥æŠ›å‡ºError
#define __unavailable   __attribute__((unavailable))

//å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œå³ä½¿è¿™ä¸ªå˜é‡/æ–¹æ³• æ²¡è¢«ä½¿ç”¨ï¼Œä¹Ÿä¸è¦æŠ›å‡ºè­¦å‘Š
#define __unused    __attribute__((unused))

//å’Œ__unusedç›¸å
#define __used      __attribute__((used))

//å¦‚æœä¸ä½¿ç”¨æ–¹æ³•çš„è¿”å›å€¼ï¼Œè¿›è¡Œè­¦å‘Š
#define __result_use_check __attribute__((__warn_unused_result__))

//OCæ–¹æ³•åœ¨Swiftä¸­ä¸å¯ç”¨
#define __swift_unavailable(_msg)   __attribute__((__availability__(swift, unavailable, message=_msg)))
```

---

#### Clangè­¦å‘Šå¤„ç†

ä½ ä¸€å®šè¿˜è§è¿‡å¦‚ä¸‹ä»£ç ï¼š

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wundeclared-selector"
///ä»£ç 
#pragma clang diagnostic pop
```

è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯

- å¯¹å½“å‰ç¼–è¯‘ç¯å¢ƒè¿›è¡Œå‹æ ˆ
- å¿½ç•¥-Wundeclared-selector(æœªå£°æ˜çš„)Selectorè­¦å‘Š
- ç¼–è¯‘ä»£ç 
- å¯¹ç¼–è¯‘ç¯å¢ƒè¿›è¡Œå‡ºæ ˆ

é€šè¿‡clang diagnostic push/pop,ä½ å¯ä»¥çµæ´»çš„æ§åˆ¶ä»£ç å—çš„ç¼–è¯‘é€‰é¡¹ã€‚

> - iOS åˆç†åˆ©ç”¨Clangè­¦å‘Šæ¥æé«˜ä»£ç è´¨é‡ (http://blog.csdn.net/Hello_Hwc/article/details/46425503)

---

#### é¢„å¤„ç†

æ‰€è°“é¢„å¤„ç†ï¼Œå°±æ˜¯åœ¨ç¼–è¯‘ä¹‹å‰çš„å¤„ç†ã€‚é¢„å¤„ç†èƒ½å¤Ÿè®©ä½ å®šä¹‰ç¼–è¯‘å™¨å˜é‡ï¼Œå®ç°æ¡ä»¶ç¼–è¯‘ã€‚

æ¯”å¦‚ï¼Œè¿™æ ·çš„ä»£ç å¾ˆå¸¸è§

```
#ifdef DEBUG
//...
#else
//...
#endif
```

åŒæ ·ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿå¯ä»¥å®šä¹‰å…¶ä»–é¢„å¤„ç†å˜é‡,åœ¨XCode-é€‰ä¸­Target-build settingsä¸­ï¼Œæœç´¢proprecessã€‚ç„¶åç‚¹å‡»å›¾ä¸­è“è‰²çš„åŠ å·ï¼Œå¯ä»¥åˆ†åˆ«ä¸ºdebugå’Œreleaseä¸¤ç§æ¨¡å¼è®¾ç½®é¢„å¤„ç†å®ã€‚

æ¯”å¦‚æˆ‘ä»¬åŠ ä¸Šï¼šTestServerï¼Œè¡¨ç¤ºåœ¨è¿™ä¸ªå®ä¸­çš„ä»£ç è¿è¡Œåœ¨æµ‹è¯•æœåŠ¡å™¨

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa6e98ed1a3?w=640&h=367&f=jpeg&s=24206)

ç„¶åï¼Œé…åˆå¤šä¸ªTarget(å³é”®Targetï¼Œé€‰æ‹©Duplicate)ï¼Œå•ç‹¬ä¸€ä¸ªTargetè´Ÿè´£æµ‹è¯•æœåŠ¡å™¨ã€‚è¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ¯æ¬¡åˆ‡æ¢æµ‹è¯•æœåŠ¡å™¨éƒ½è¦ä¿®æ”¹ä»£ç äº†ã€‚

```
#ifdef TESTMODE
//æµ‹è¯•æœåŠ¡å™¨ç›¸å…³çš„ä»£ç 
#else
//ç”Ÿäº§æœåŠ¡å™¨ç›¸å…³ä»£ç 
#endif
```

---

#### æ’å…¥è„šæœ¬

é€šå¸¸ï¼Œå¦‚æœä½ ä½¿ç”¨CocoaPodæ¥ç®¡ç†ä¸‰æ–¹åº“ï¼Œé‚£ä¹ˆä½ çš„Build Phaseæ˜¯è¿™æ ·å­çš„ï¼š

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa6ea6e757b?w=640&h=226&f=jpeg&s=10972)

å…¶ä¸­ï¼š[CP]å¼€å¤´çš„ï¼Œå°±æ˜¯CocoaPodæ’å…¥çš„è„šæœ¬ã€‚

- Check Pods Manifest.lockï¼Œç”¨æ¥æ£€æŸ¥cocoapodç®¡ç†çš„ä¸‰æ–¹åº“æ˜¯å¦éœ€è¦æ›´æ–°
- Embed Pods Frameworkï¼Œè¿è¡Œè„šæœ¬æ¥é“¾æ¥ä¸‰æ–¹åº“çš„é™æ€/åŠ¨æ€åº“
- Copy Pods Resourcesï¼Œè¿è¡Œè„šæœ¬æ¥æ‹·è´ä¸‰æ–¹åº“çš„èµ„æºæ–‡ä»¶

è€Œè¿™äº›é…ç½®ä¿¡æ¯éƒ½å­˜å‚¨åœ¨è¿™ä¸ªæ–‡ä»¶(.xcodeprog)é‡Œ

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa6e98b2419?w=418&h=542&f=jpeg&s=31719)

åˆ°è¿™é‡Œï¼ŒCocoaPodçš„åŸç†ä¹Ÿå°±å¤§è‡´ææ¸…æ¥šäº†ï¼Œé€šè¿‡ä¿®æ”¹xcodeprojectï¼Œç„¶åé…ç½®ç¼–è¯‘æœŸè„šæœ¬ï¼Œæ¥ä¿è¯ä¸‰æ–¹åº“èƒ½å¤Ÿæ­£ç¡®çš„ç¼–è¯‘è¿æ¥ã€‚

åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ’å…¥è‡ªå·±çš„è„šæœ¬ï¼Œæ¥åšä¸€äº›é¢å¤–çš„äº‹æƒ…ã€‚æ¯”å¦‚ï¼Œæ¯æ¬¡è¿›è¡Œarchiveçš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»æ‰‹åŠ¨è°ƒæ•´targetçš„buildç‰ˆæœ¬ï¼Œå¦‚æœä¸€ä¸å°å¿ƒï¼Œå°±ä¼šå¿˜è®°ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ’å…¥è„šæœ¬è‡ªåŠ¨åŒ–ã€‚

```
buildNumber=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "${PROJECT_DIR}/${INFOPLIST_FILE}")
buildNumber=$(($buildNumber + 1))
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "${PROJECT_DIR}/${INFOPLIST_FILE}"
```

è¿™æ®µè„šæœ¬å…¶å®å¾ˆç®€å•ï¼Œè¯»å–å½“å‰pistçš„buildç‰ˆæœ¬å·,ç„¶åå¯¹å…¶åŠ ä¸€ï¼Œé‡æ–°å†™å…¥ã€‚

ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼š

- Xcode â€“ é€‰ä¸­Target â€“ é€‰ä¸­build phase
- é€‰æ‹©æ·»åŠ Run Script Phase

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa6e73f1e27?w=640&h=239&f=jpeg&s=15090)

ç„¶åæŠŠè¿™æ®µè„šæœ¬æ‹·è´è¿›å»ï¼Œå¹¶ä¸”å‹¾é€‰Run Script Only When installingï¼Œä¿è¯åªæœ‰æˆ‘ä»¬åœ¨å®‰è£…åˆ°è®¾å¤‡ä¸Šçš„æ—¶å€™ï¼Œæ‰ä¼šæ‰§è¡Œè¿™æ®µè„šæœ¬ã€‚é‡å‘½åè„šæœ¬çš„åå­—ä¸ºAuto Increase build number

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa7225559d5?w=640&h=239&f=jpeg&s=15090)

ç„¶åï¼Œæ‹–åŠ¨è¿™ä¸ªè„šæœ¬çš„åˆ°Link Binary With Librariesä¸‹é¢

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa6eb298a6c?w=640&h=360&f=jpeg&s=20959)

---

#### è„šæœ¬ç¼–è¯‘æ‰“åŒ…

è„šæœ¬åŒ–ç¼–è¯‘æ‰“åŒ…å¯¹äºCI(æŒç»­é›†æˆ)æ¥è¯´ï¼Œååˆ†æœ‰ç”¨ã€‚iOSå¼€å‘ä¸­ï¼Œç¼–è¯‘æ‰“åŒ…å¿…å¤‡çš„ä¸¤ä¸ªå‘½ä»¤æ˜¯ï¼š

```
//ç¼–è¯‘æˆ.app
xcodebuild  -workspace $projectName.xcworkspace -scheme $projectName  -configuration $buildConfig clean build SYMROOT=$buildAppToDir
//æ‰“åŒ…
xcrun -sdk iphoneos PackageApplication -v $appDir/$projectName.app -o $appDir/$ipaName.ipa

é€šè¿‡infoå‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°è¯¦ç»†çš„æ–‡æ¡£
info xcodebuild
```

> ä¹‹å‰å†™çš„ä¸€å¥—åŸºäº Python çš„ç¼–è¯‘æ‰“åŒ…è„šæœ¬ (https://github.com/ReverseScale/AutoBuildScript/blob/master/autobuild.py)

---

#### æé«˜é¡¹ç›®ç¼–è¯‘é€Ÿåº¦

é€šå¸¸ï¼Œå½“é¡¹ç›®å¾ˆå¤§ï¼Œæºä»£ç å’Œä¸‰æ–¹åº“å¼•å…¥å¾ˆå¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°ç¼–è¯‘çš„é€Ÿåº¦å¾ˆæ…¢ã€‚åœ¨äº†è§£äº†XCodeçš„ç¼–è¯‘è¿‡ç¨‹åï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹è§’åº¦æ¥ä¼˜åŒ–ç¼–è¯‘é€Ÿåº¦ï¼š

##### æŸ¥çœ‹ç¼–è¯‘æ—¶é—´

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé€”å¾„ï¼Œèƒ½å¤Ÿçœ‹åˆ°ç¼–è¯‘çš„æ—¶é—´ï¼Œè¿™æ ·æ‰èƒ½æœ‰ä¸ªå¯¹æ¯”ï¼ŒçŸ¥é“æˆ‘ä»¬çš„ä¼˜åŒ–ç©¶ç«Ÿæœ‰æ²¡æœ‰æ•ˆæœã€‚

å¯¹äºXCode 8ï¼Œå…³é—­XCodeï¼Œç»ˆç«¯è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤

```
defaults write com.apple.dt.Xcode ShowBuildOperationDuration YES
```

ç„¶åï¼Œé‡å¯XCodeï¼Œç„¶åç¼–è¯‘ï¼Œä½ ä¼šåœ¨è¿™é‡Œçœ‹åˆ°ç¼–è¯‘æ—¶é—´ã€‚

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa758ba06d4?w=640&h=97&f=png&s=23724)

##### ä»£ç å±‚é¢çš„ä¼˜åŒ–

2.1)forward declaration

æ‰€è°“forward declarationï¼Œå°±æ˜¯@class CLASSNAMEï¼Œè€Œä¸æ˜¯#import CLASSNAME.hã€‚è¿™æ ·ï¼Œç¼–è¯‘å™¨èƒ½å¤§å¤§æé«˜#importçš„æ›¿æ¢é€Ÿåº¦ã€‚

2.2)å¯¹å¸¸ç”¨çš„å·¥å…·ç±»è¿›è¡Œæ‰“åŒ…(Framework/.a)

æ‰“åŒ…æˆFrameworkæˆ–è€…é™æ€åº“ï¼Œè¿™æ ·ç¼–è¯‘çš„æ—¶å€™è¿™éƒ¨åˆ†ä»£ç å°±ä¸éœ€è¦é‡æ–°ç¼–è¯‘äº†ã€‚

2.3)å¸¸ç”¨å¤´æ–‡ä»¶æ”¾åˆ°é¢„ç¼–è¯‘æ–‡ä»¶é‡Œ

XCodeçš„pchæ–‡ä»¶æ˜¯é¢„ç¼–è¯‘æ–‡ä»¶ï¼Œè¿™é‡Œçš„å†…å®¹åœ¨æ‰§è¡ŒXCode buildä¹‹å‰å°±å·²ç»è¢«é¢„ç¼–è¯‘ï¼Œå¹¶ä¸”å¼•å…¥åˆ°æ¯ä¸€ä¸ª.mæ–‡ä»¶é‡Œäº†ã€‚

##### ç¼–è¯‘å™¨é€‰é¡¹ä¼˜åŒ–

3.1)Debugæ¨¡å¼ä¸‹ï¼Œä¸ç”Ÿæˆdsymæ–‡ä»¶

ä¸Šæ–‡æåˆ°äº†ï¼Œdysmæ–‡ä»¶é‡Œå­˜å‚¨äº†è°ƒè¯•ä¿¡æ¯ï¼Œåœ¨Debugæ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©XCodeå’ŒLLDBè¿›è¡Œè°ƒè¯•ã€‚æ‰€ä»¥ï¼Œä¸éœ€è¦ç”Ÿæˆé¢å¤–çš„dsymæ–‡ä»¶æ¥é™ä½ç¼–è¯‘é€Ÿåº¦ã€‚

3.2)Debugå¼€å¯Build Active Architecture Only

åœ¨XCode -> Build Settings -> Build Active Architecture Only æ”¹ä¸ºYESã€‚è¿™æ ·åšï¼Œå¯ä»¥åªç¼–è¯‘å½“å‰çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚arm7/arm64ç­‰ç­‰ï¼Œè®°å¾—åªå¼€å¯Debugæ¨¡å¼ã€‚è¿™ä¸ªé€‰é¡¹åœ¨é«˜ç‰ˆæœ¬çš„XCodeä¸­è‡ªåŠ¨å¼€å¯äº†ã€‚

3.3)Debugæ¨¡å¼ä¸‹ï¼Œå…³é—­ç¼–è¯‘å™¨ä¼˜åŒ–

ç¼–è¯‘å™¨ä¼˜åŒ–

![](https://user-gold-cdn.xitu.io/2018/5/29/163aafa750aaa240?w=640&h=192&f=jpeg&s=15407)

---

#### æ›´å¤šæ·±å…¥å­¦ä¹ 
å…³äº iOS ç¼–è¯‘ Clang LLVM ç›¸å…³çš„çŸ¥è¯†æ•´ç†å‚è§ï¼š
[æ·±å…¥å‰–æ iOS ç¼–è¯‘ Clang LLVM](https://github.com/ming1016/study/wiki/æ·±å…¥å‰–æ-iOS-ç¼–è¯‘-Clang---LLVM)

---

#### ç‰ˆæƒå£°æ˜

æ­¤ç³»åˆ—æ–‡ç« å†…å®¹å¤šä¸ºç½‘ä¸Šèµ„æ–™æ•´ç†ï¼Œæ–‡ç« ç»“å°¾ä¼šåˆ—å‡ºå‚ç…§é“¾æ¥ï¼Œå¦‚æœ‰çº°æ¼æ¬¢è¿è®¨è®ºğŸ¤—

> ä»¥ä¸Šæ–‡ç« æ•´ç†è‡ªï¼šhttps://my.oschina.net/u/2345393/blog/820141ï¼Œhttps://linuxtoy.org/archives/llvm-and-clang.htmlï¼Œhttps://blog.csdn.net/hello_hwc/article/details/53557308ï¼Œhttps://github.com/ming1016/study/wiki/æ·±å…¥å‰–æ-iOS-ç¼–è¯‘-Clang---LLVM